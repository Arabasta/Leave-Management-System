<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:replace="fragments/head :: html_head">
    <title>Personal Leave History</title>
</head>
<body>
<div th:replace="fragments/navbar :: menu"></div>

<br/>
<h2 style="text-align: center;">Personal Leave History</h2>

<h3 style="text-align: center;"
    th:if="${#lists.isEmpty(personalLeaveApplications)}">No Records.</h3>

<table th:if="${not #lists.isEmpty(personalLeaveApplications)}" style="width:80%;
margin-left: auto; margin-right: auto;">
    <tr>
        <th>  </th>
        <th>Annual Leave</th>
        <th>Compensation Leave</th>
        <th>Medical Leave</th>
        <th>Compassionate Leave</th>
    </tr>
    <tr>
        <td>Remaining Balance</td>
        <td th:text="${LeaveBalance.getCurrentAnnualLeave()}"></td>
        <td th:text="${LeaveBalance.getCurrentCompensationLeave()}"></td>
        <td th:text="${LeaveBalance.getCurrentMedicalLeave()}"></td>
        <td th:text="${LeaveBalance.COMPASSIONATE_LEAVE}"></td>
    </tr>
    </tr>
    <tr>
        <td>Total Entitlement</td>
        <td th:text="${LeaveBalance.annualLeave}"></td>
        <td th:text="${LeaveBalance.compensationLeave}"></td>
        <td th:text="${LeaveBalance.medicalLeave}"></td>
        <td th:text="${LeaveBalance.COMPASSIONATE_LEAVE}"></td>
    </tr>
</table>
<table th:if="${not #lists.isEmpty(personalLeaveApplications)}" style="width:80%;
margin-left: auto; margin-right: auto;">
    <tr>
        <th>Leave Application ID</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Leave Type</th>
        <th>Leave Status</th>
        <th>Details</th>
    </tr>
    <tr th:each="leaveApplication:${personalLeaveApplications}">
        <td th:text="${leaveApplication.getId()}"></td>
        <td th:text="${#temporals.format(leaveApplication.getStartDate(), 'dd-MMM-yyyy')}"></td>
        <td th:text="${#temporals.format(leaveApplication.getEndDate(), 'dd-MMM-yyyy')}"></td>
        <td th:text="${leaveApplication.getLeaveType()}"></td>
        <td th:text="${leaveApplication.getLeaveStatus()}"></td>
        <td><a th:href="@{/employee/leave/view/{id}(id=${leaveApplication.getId()})}">Details</a></td>
    </tr>
</table>

<table style="width:50%; margin-left: auto; margin-right: auto; border:
white;">
    <tr>
        <td style="text-align: center; font-weight: bold;"><a href="#" onclick="history.go(-1); return false;">Back</a></td>
    </tr>
</table>
<div th:if="${page.totalPages > 1}">
    <nav aria-label="Pagination">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${page.number == 0} ? 'disabled'">
                <a class="page-link" th:href="@{/employee/leave/personalHistory(pageNo=${page.number - 1}, pageSize=${page.size})}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item active">
                <a class="page-link" th:text="${page.number + 1}"></a>
            </li>
            <li class="page-item" th:classappend="${page.number + 1 == page.totalPages} ? 'disabled'">
                <a class="page-link" th:href="@{/employee/leave/personalHistory(pageNo=${page.number + 1}, pageSize=${page.size})}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>
<div style="text-align: center; margin-top: 20px;">
    <form th:action="@{/employee/leave/personalHistory}" method="get">
        <label for="pageSize">Results per page:</label>
        <select id="pageSize" name="pageSize" onchange="this.form.submit()">
            <option th:value="10" th:text="10" th:selected="${page.size == 10}"></option>
            <option th:value="20" th:text="20" th:selected="${page.size == 20}"></option>
            <option th:value="25" th:text="25" th:selected="${page.size == 25}"></option>
        </select>
        <input type="hidden" name="pageNo" th:value="${page.number}"/>
    </form>
</div>
</body>
</html>