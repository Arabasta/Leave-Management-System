<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="fragments/head :: html_head">
    <title>Personal Leave History</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div th:replace="fragments/navbar :: menu"></div>

<div class="container mt-4">
    <h2 class="text-center">Personal Leave History</h2>

    <h3 class="text-center" th:if="${#lists.isEmpty(personalLeaveApplications)}">No Records.</h3>

    <div th:if="${not #lists.isEmpty(personalLeaveApplications)}">
        <table class="table table-bordered table-striped mt-3">
            <thead>
            <tr>
                <th></th>
                <th>Annual Leave</th>
                <th>Compensation Leave</th>
                <th>Medical Leave</th>
                <th>Compassionate Leave</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Remaining Balance</td>
                <td th:text="${LeaveBalance.getCurrentAnnualLeave()}"></td>
                <td th:text="${LeaveBalance.getCurrentCompensationLeave()}"></td>
                <td th:text="${LeaveBalance.getCurrentMedicalLeave()}"></td>
                <td th:text="${LeaveBalance.COMPASSIONATE_LEAVE - LeaveBalance.compassionateLeaveConsumed}"></td>
            </tr>
            <tr>
                <td>Total Balance</td>
                <td th:text="${LeaveBalance.annualLeave}"></td>
                <td th:text="${LeaveBalance.compensationLeave}"></td>
                <td th:text="${LeaveBalance.medicalLeave}"></td>
                <td th:text="${LeaveBalance.COMPASSIONATE_LEAVE}"></td>
            </tr>
            </tbody>
        </table>

        <table class="table table-bordered table-striped mt-3">
            <thead>
            <tr>
                <th>Leave Application ID</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Leave Type</th>
                <th>Leave Status</th>
                <th>Details</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="leaveApplication:${personalLeaveApplications}">
                <td th:text="${leaveApplication.getId()}"></td>
                <td th:text="${#temporals.format(leaveApplication.getStartDate(), 'dd-MMM-yyyy')}"></td>
                <td th:text="${#temporals.format(leaveApplication.getEndDate(), 'dd-MMM-yyyy')}"></td>
                <td th:text="${leaveApplication.getLeaveType()}"></td>
                <td th:text="${leaveApplication.getLeaveStatus()}"></td>
                <td><a th:href="@{/employee/leave/view/{id}(id=${leaveApplication.getId()})}" class="btn btn-primary btn-sm">Details</a></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="text-center mt-4">
        <a href="#" onclick="history.go(-1); return false;" class="btn btn-secondary">Back</a>
    </div>
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2ABjtSj7R8gFqjwkJXYa2yMwD4/Op3ZSffvENxyl5P4wKxqlpF4F2N3y9p" crossorigin="anonymous"></script>
</body>
</html>
