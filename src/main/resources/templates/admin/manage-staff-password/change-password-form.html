<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head.html :: html_head"></head>

<style>
    .error {
        color: red;
    }
</style>

<body>
<div th:replace="fragments/navbar :: menu"></div>

<div class="container w-50 mt-5 text-center">
    <h1 class="mb-3 mt-3 text-center">Change Password</h1>
    <form method="post" th:action="@{/admin/manage-staff-password/update-password}" th:object="${currentAccount}">
        <div>
            <!-- hidden fields -->
            <input type="hidden" th:field="*{id}"/>
            <input type="hidden" th:field="*{role}"/>
            <input type="hidden" th:field="*{createDateTime}"/>
            <input type="hidden" th:field="*{employee.id}"/>


            <div class="mb-3 row align-items-center">
                <label class="col-4 col-form-label" for="userName">Username:</label>
                <div class="col-8">
                    <input class="form-control" id="userName" th:field="*{username}" type="text" readonly/>
                    <span th:if="${#fields.hasErrors('username')}" th:errors="*{username}"
                          th:classappend="${#fields.hasErrors('username')} ? 'error' : ''"></span>
                </div>
            </div>

            <div class="mb-3 row align-items-center">
                <label class="col-4 col-form-label" for="userPassword">Password:</label>
                <div class="col-8">
                    <input class="form-control" name="userPassword" id="userPassword" th:field="*{password}" type="password" onChange="check()"/>
                    <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}"
                          th:classappend="${#fields.hasErrors('password')} ? 'error' : ''"></span>
                </div>
            </div>

            <!-- reconfirm password -->
            <div class="mb-3 row align-items-center">
                <label class="col-4 col-form-label" for="confirmPassword">Confirm Password:</label>
                <div class="col-8">
                    <input class="form-control" name="confirmPassword" id="confirmPassword" type="password" onChange="check()"/>
                    <span id='message' class="error"></span>
                </div>
            </div>

            <div class="mb-3 row align-items-center">
                <label class="col-4 col-form-label" for="userEmail">Email:</label>
                <div class="col-8">
                    <input class="form-control" id="userEmail" th:field="*{email}" type="text" readonly/>
                    <span th:if="${#fields.hasErrors('email')}" th:errors="*{email}"
                          th:classappend="${#fields.hasErrors('email')} ? 'error' : ''"></span>
                </div>
            </div>

            <br>

            <div class="d-flex flex-row-reverse">
                <div class="p-2">
                    <input class="btn btn-primary float-end" type="submit" value="Update"/>
                </div>
            </div>

        </div>
    </form>
</div>

<script>
    function check() {
        var password = document.getElementById('userPassword').value;
        var confirmPassword = document.getElementById('confirmPassword').value;
        var message = document.getElementById('message');

        if (password === confirmPassword) {
            message.textContent = 'Passwords match';
            message.style.color = 'green';
        } else {
            message.textContent = 'Passwords do not match';
            message.style.color = 'red';
        }
    }
</script>
</body>
</html>
